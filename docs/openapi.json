{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080/api/v1","description":"Generated server url"}],"paths":{"/users/guests/{guestId}":{"put":{"tags":["Booking Guests"],"summary":"Update a guest","operationId":"updateGuest","parameters":[{"name":"guestId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestDto"}}},"required":true},"responses":{"200":{"description":"OK"}}},"delete":{"tags":["Booking Guests"],"summary":"Remove a guest","operationId":"deleteGuest","parameters":[{"name":"guestId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/admin/hotels/{hotelId}":{"get":{"tags":["Admin Hotel"],"summary":"Get a hotel by Id","operationId":"getHotelById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HotelDto"}}}}}},"put":{"tags":["Admin Hotel"],"summary":"Update a hotel","operationId":"updateHotelById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HotelDto"}}}}}},"delete":{"tags":["Admin Hotel"],"summary":"Delete a hotel","operationId":"deleteHotelById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/admin/hotels/{hotelId}/rooms/{roomId}":{"get":{"tags":["Admin Inventory"],"summary":"Get a room by id","operationId":"getRoomById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoomDto"}}}}}},"put":{"tags":["Admin Inventory"],"summary":"Update a room","operationId":"updateRoomById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoomDto"}}}}}},"delete":{"tags":["Admin Inventory"],"summary":"Delete a room by id","operationId":"deleteRoomById","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoomDto"}}}}}}},"/webhook/payment":{"post":{"tags":["Webhook"],"summary":"Capture the payments","operationId":"capturePayments","parameters":[{"name":"Stripe-Signature","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/users/guests":{"get":{"tags":["Booking Guests"],"summary":"Get all my guests","operationId":"getAllGuests","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GuestDto"}}}}}}},"post":{"tags":["Booking Guests"],"summary":"Add a new guest to my guests list","operationId":"addNewGuest","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GuestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GuestDto"}}}}}}},"/bookings/{bookingId}/payments":{"post":{"tags":["Booking Flow"],"summary":"Initiate payments flow for the booking","operationId":"initiatePayment","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingPaymentInitResponseDto"}}}}}}},"/bookings/{bookingId}/cancel":{"post":{"tags":["Booking Flow"],"summary":"Cancel the booking","operationId":"cancelBooking","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/bookings/{bookingId}/addGuests":{"post":{"tags":["Booking Flow"],"summary":"Add guest Ids to the booking","operationId":"addGuests","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"integer","format":"int64"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingDto"}}}}}}},"/bookings/init":{"post":{"tags":["Booking Flow"],"summary":"Initiate the booking","operationId":"initialiseBooking","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingDto"}}}}}}},"/auth/signup":{"post":{"tags":["Auth"],"summary":"Create a new account","operationId":"signup","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}}},"/auth/refresh":{"post":{"tags":["Auth"],"summary":"Refresh the JWT with a refresh token","operationId":"refresh","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Login request","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponseDto"}}}}}}},"/admin/hotels":{"get":{"tags":["Admin Hotel"],"summary":"Get all hotels owned by admin","operationId":"getAllHotels","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/HotelDto"}}}}}}},"post":{"tags":["Admin Hotel"],"summary":"Create a new hotel","operationId":"createNewHotel","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HotelDto"}}}}}}},"/admin/hotels/{hotelId}/rooms":{"get":{"tags":["Admin Inventory"],"summary":"Get all rooms in a hotel","operationId":"getAllRoomsInHotel","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RoomDto"}}}}}}},"post":{"tags":["Admin Inventory"],"summary":"Create a new room in a hotel","operationId":"createNewRoom","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoomDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoomDto"}}}}}}},"/users/profile":{"get":{"tags":["Profile"],"summary":"Get my Profile","operationId":"getMyProfile","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}}},"patch":{"tags":["Profile"],"summary":"Update the user profile","operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileUpdateRequestDto"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/admin/inventory/rooms/{roomId}":{"get":{"tags":["Admin Inventory"],"summary":"Get all inventory of a room","operationId":"getAllInventoryByRoom","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/InventoryDto"}}}}}}},"patch":{"tags":["Admin Inventory"],"summary":"Update the inventory of a room","operationId":"updateInventory","parameters":[{"name":"roomId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateInventoryRequestDto"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/admin/hotels/{hotelId}/activate":{"patch":{"tags":["Admin Hotel"],"summary":"Activate a hotel","operationId":"activateHotel","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/users/myBookings":{"get":{"tags":["Profile"],"summary":"Get all my previous bookings","operationId":"getMyBookings","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingDto"}}}}}}}},"/hotels/{hotelId}/info":{"get":{"tags":["Browse Hotels"],"summary":"Get a hotel info by hotelId","operationId":"getHotelInfo","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelInfoRequestDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HotelInfoDto"}}}}}}},"/hotels/search":{"get":{"tags":["Browse Hotels"],"summary":"Search hotels","operationId":"searchHotels","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HotelSearchRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageHotelPriceResponseDto"}}}}}}},"/bookings/{bookingId}/status":{"get":{"tags":["Booking Flow"],"summary":"Check the status of the booking","operationId":"getBookingStatus","parameters":[{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingStatusResponseDto"}}}}}}},"/admin/hotels/{hotelId}/reports":{"get":{"tags":["Admin Bookings"],"summary":"Generate a bookings report of a hotel","operationId":"getHotelReport","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":false,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":false,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/HotelReportDto"}}}}}}},"/admin/hotels/{hotelId}/bookings":{"get":{"tags":["Admin Bookings"],"summary":"Get all bookings of a hotel","operationId":"getAllBookingsByHotelId","parameters":[{"name":"hotelId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingDto"}}}}}}}}},"components":{"schemas":{"GuestDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"]},"dateOfBirth":{"type":"string","format":"date"}}},"HotelContactInfo":{"type":"object","properties":{"address":{"type":"string"},"phoneNumber":{"type":"string"},"email":{"type":"string"},"location":{"type":"string"}}},"HotelDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"city":{"type":"string"},"photos":{"type":"array","items":{"type":"string"}},"amenities":{"type":"array","items":{"type":"string"}},"contactInfo":{"$ref":"#/components/schemas/HotelContactInfo"},"active":{"type":"boolean"}}},"RoomDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"type":"string"},"basePrice":{"type":"number"},"photos":{"type":"array","items":{"type":"string"}},"amenities":{"type":"array","items":{"type":"string"}},"totalCount":{"type":"integer","format":"int32"},"capacity":{"type":"integer","format":"int32"}}},"BookingPaymentInitResponseDto":{"type":"object","properties":{"sessionUrl":{"type":"string"}}},"BookingDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"roomsCount":{"type":"integer","format":"int32"},"checkInDate":{"type":"string","format":"date"},"checkOutDate":{"type":"string","format":"date"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"bookingStatus":{"type":"string","enum":["RESERVED","GUESTS_ADDED","PAYMENTS_PENDING","CONFIRMED","CANCELLED","EXPIRED"]},"guests":{"type":"array","items":{"$ref":"#/components/schemas/GuestDto"},"uniqueItems":true},"amount":{"type":"number"}}},"BookingRequest":{"type":"object","properties":{"hotelId":{"type":"integer","format":"int64"},"roomId":{"type":"integer","format":"int64"},"checkInDate":{"type":"string","format":"date"},"checkOutDate":{"type":"string","format":"date"},"roomsCount":{"type":"integer","format":"int32"}}},"SignUpRequestDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"name":{"type":"string"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"]},"dateOfBirth":{"type":"string","format":"date"}}},"LoginResponseDto":{"type":"object","properties":{"accessToken":{"type":"string"}}},"LoginDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"ProfileUpdateRequestDto":{"type":"object","properties":{"name":{"type":"string"},"dateOfBirth":{"type":"string","format":"date"},"gender":{"type":"string","enum":["MALE","FEMALE","OTHER"]}}},"UpdateInventoryRequestDto":{"type":"object","properties":{"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"surgeFactor":{"type":"number"},"closed":{"type":"boolean"}}},"HotelInfoRequestDto":{"type":"object","properties":{"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"roomsCount":{"type":"integer","format":"int64"}}},"HotelInfoDto":{"type":"object","properties":{"hotel":{"$ref":"#/components/schemas/HotelDto"},"rooms":{"type":"array","items":{"$ref":"#/components/schemas/RoomPriceResponseDto"}}}},"RoomPriceResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"type":{"type":"string"},"photos":{"type":"array","items":{"type":"string"}},"amenities":{"type":"array","items":{"type":"string"}},"price":{"type":"number","format":"double"}}},"HotelSearchRequest":{"type":"object","properties":{"city":{"type":"string"},"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"},"roomsCount":{"type":"integer","format":"int32"},"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"}}},"HotelPriceResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"city":{"type":"string"},"photos":{"type":"array","items":{"type":"string"}},"amenities":{"type":"array","items":{"type":"string"}},"contactInfo":{"$ref":"#/components/schemas/HotelContactInfo"},"price":{"type":"number","format":"double"}}},"PageHotelPriceResponseDto":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{"$ref":"#/components/schemas/HotelPriceResponseDto"}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"numberOfElements":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"last":{"type":"boolean"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"unpaged":{"type":"boolean"},"pageNumber":{"type":"integer","format":"int32"},"pageSize":{"type":"integer","format":"int32"},"paged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"BookingStatusResponseDto":{"type":"object","properties":{"bookingStatus":{"type":"string","enum":["RESERVED","GUESTS_ADDED","PAYMENTS_PENDING","CONFIRMED","CANCELLED","EXPIRED"]}}},"InventoryDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"date":{"type":"string","format":"date"},"bookedCount":{"type":"integer","format":"int32"},"reservedCount":{"type":"integer","format":"int32"},"totalCount":{"type":"integer","format":"int32"},"surgeFactor":{"type":"number"},"price":{"type":"number"},"closed":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"HotelReportDto":{"type":"object","properties":{"bookingCount":{"type":"integer","format":"int64"},"totalRevenue":{"type":"number"},"avgRevenue":{"type":"number"}}}}}}